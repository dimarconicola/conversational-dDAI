{"ast":null,"code":"module.exports = function (e) {\n  var n = {};\n\n  function t(o) {\n    if (n[o]) return n[o].exports;\n    var r = n[o] = {\n      i: o,\n      l: !1,\n      exports: {}\n    };\n    return e[o].call(r.exports, r, r.exports, t), r.l = !0, r.exports;\n  }\n\n  return t.m = e, t.c = n, t.d = function (e, n, o) {\n    t.o(e, n) || Object.defineProperty(e, n, {\n      enumerable: !0,\n      get: o\n    });\n  }, t.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, t.t = function (e, n) {\n    if (1 & n && (e = t(e)), 8 & n) return e;\n    if (4 & n && \"object\" == typeof e && e && e.__esModule) return e;\n    var o = Object.create(null);\n    if (t.r(o), Object.defineProperty(o, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & n && \"string\" != typeof e) for (var r in e) t.d(o, r, function (n) {\n      return e[n];\n    }.bind(null, r));\n    return o;\n  }, t.n = function (e) {\n    var n = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return t.d(n, \"a\", n), n;\n  }, t.o = function (e, n) {\n    return Object.prototype.hasOwnProperty.call(e, n);\n  }, t.p = \"\", t(t.s = 0);\n}([function (e, n, t) {\n  \"use strict\";\n\n  t.r(n);\n\n  const o = () => String(Math.floor(1e4 * Math.random()));\n\n  n.default = {\n    onChangeCallback: null,\n    signin: function (e, n) {\n      return u(e).then(e => {\n        if (e) {\n          if (e.user.password === n) return this.changeAuthToken(e.token), e.user;\n          throw new f(\"auth/wrong-password\", \"Password is wrong\");\n        }\n\n        throw new f(\"auth/user-not-found\", \"Email does not have an account\");\n      });\n    },\n    signup: function (e, n) {\n      return u(e).then(t => {\n        if (t) throw new f(\"auth/email-already-in-use\", \"Email is already in use\");\n        const r = {\n          token: o(),\n          user: {\n            email: e,\n            password: n\n          }\n        };\n        return i(r).then(() => (this.changeAuthToken(r.token), r.user));\n      });\n    },\n    signout: async function () {\n      return this.changeAuthToken(null), Promise.resolve();\n    },\n    onChange: function (e) {\n      this.onChangeCallback = e;\n\n      const n = e => {\n        s(e).then(e => {\n          this.onChangeCallback(!!e && e.user);\n        });\n      },\n            t = window.addEventListener(\"storage\", ({\n        key: e,\n        newValue: t\n      }) => {\n        \"auth-token\" === e && n(JSON.parse(t));\n      }, !1),\n            o = c(\"auth-token\");\n\n      return n(o), () => {\n        window.removeEventListener(\"storage\", t);\n      };\n    },\n    sendPasswordResetEmail: function (e) {\n      return u(e).then(e => {\n        throw e ? (d(\"auth-pass-reset-code\", e.token), console.log(\"Your one-time use password reset code:\", e.token), new f(\"auth/cannot-send-email\", \"You're using Fake Auth, which cannot send password reset emails. These emails normally contain a link to your site with a special reset code. But worry not! Fake Auth has stored the reset code locally in your browser so you can simply go to your change password page now and choose a new password. This enables you to fully test your password reset flow and error states without involving emails.\")) : new f(\"auth/user-not-found\", \"Email does not have an account\");\n      });\n    },\n    confirmPasswordReset: function (e, n) {\n      let t;\n      var o;\n      return n ? t = n : (t = c(\"auth-pass-reset-code\"), o = \"auth-pass-reset-code\", window.localStorage.removeItem(o)), l(t, {\n        password: e\n      }).then(e => {\n        if (e) return !0;\n        throw new f(\"auth/invalid-action-code\", \"Invalid password update code\");\n      });\n    },\n    changeAuthToken: function (e) {\n      d(\"auth-token\", e), this.onChangeCallback && s(e).then(e => {\n        this.onChangeCallback(!!e && e.user);\n      });\n    }\n  };\n\n  const r = () => c(\"auth-db\", []),\n        a = e => d(\"auth-db\", e),\n        s = e => h(() => r().find(n => n.token === e)),\n        u = e => h(() => r().find(n => n.user.email === e)),\n        i = e => h(() => {\n    const n = r();\n    n.push(e), a(n);\n  }),\n        l = (e, n = {}) => h(() => {\n    const t = r(),\n          o = t.findIndex(n => n.token === e);\n    return -1 !== o && (t[o].user = { ...t[o].user,\n      ...n\n    }, a(t), !0);\n  });\n\n  function c(e, n = null) {\n    const t = window.localStorage.getItem(e);\n    return t ? JSON.parse(t) : n;\n  }\n\n  function d(e, n) {\n    window.localStorage.setItem(e, JSON.stringify(n));\n  }\n\n  0 === r().length && a([{\n    user: {\n      email: \"demo@gmail.com\",\n      pass: \"demo\"\n    },\n    token: \"12345\"\n  }]);\n\n  const h = e => new Promise(n => setTimeout(() => {\n    n(e());\n  }, 200));\n\n  function f(e, n) {\n    const t = new Error(n);\n    return t.code = e, t;\n  }\n\n  f.prototype = Object.create(Error.prototype);\n}]);","map":null,"metadata":{},"sourceType":"script"}