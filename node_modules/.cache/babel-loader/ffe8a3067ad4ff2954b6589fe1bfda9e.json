{"ast":null,"code":"import _slicedToArray from \"/Users/nicoladimarco/Desktop/Code/conversational-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nicoladimarco/Desktop/Code/conversational-test/src/util/auth.js\";\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport queryString from \"query-string\";\nimport fakeAuth from \"fake-auth\";\n/*\n    Handles authentication with fakeAuth, a library for prototyping ...\n    ... auth flows without need for a backend (everything is stored locally).\n\n    [CHANGING AUTH SERVICES]: You can switch to another auth service ...\n    ... like firebase, auth0, etc, by modifying the useProvideAuth() ...\n    ... function below. Simply swap out the fakeAuth.function() calls for the ...\n    ... correct ones for your given auth service.\n  */\n\nconst authContext = createContext(); // Provider component that wraps your app and makes auth object ...\n// ... available to any child component that calls useAuth().\n\nexport function ProvideAuth({\n  children\n}) {\n  const auth = useProvideAuth();\n  return React.createElement(authContext.Provider, {\n    value: auth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, children);\n} // Hook for child components to get the auth object ...\n// ... update when it changes.\n\nexport const useAuth = () => {\n  return useContext(authContext);\n}; // Provider hook that creates auth object and handles state\n\nfunction useProvideAuth() {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const signin = (email, password) => {\n    return fakeAuth.signin(email, password).then(user => {\n      setUser(user);\n      return user;\n    });\n  };\n\n  const signup = (email, password) => {\n    return fakeAuth.signup(email, password).then(user => {\n      setUser(user);\n      return user;\n    });\n  };\n\n  const signout = () => {\n    return fakeAuth.signout().then(() => {\n      setUser(false);\n    });\n  };\n\n  const sendPasswordResetEmail = email => {\n    return fakeAuth.sendPasswordResetEmail(email);\n  };\n\n  const confirmPasswordReset = (password, code) => {\n    // If no reset code passed in then fetch it automatically from current url.\n    // [CHANGING AUTH SERVICES]: If not passing in the code as the second ...\n    // ... arg above then make sure getFromQueryString() below has the ...\n    // ... correct url parameter name (it might not be \"code\").\n    const resetCode = code || getFromQueryString(\"code\");\n    return fakeAuth.confirmPasswordReset(password, resetCode);\n  }; // Subscribe to user on mount\n  // [CHANGING AUTH SERVICES]: Not all auth services have a subscription ...\n  // ... function so depending on your service you may need to remove  ...\n  // ... this effect and use the commented out one below.\n\n\n  useEffect(() => {\n    const unsubscribe = fakeAuth.onChange(user => {\n      setUser(user);\n    }); // Call unsubscribe on cleanup\n\n    return () => unsubscribe();\n  }, []); // Fetch user on mount\n  // [CHANGING AUTH SERVICES]: If your auth service doesn't have a subscribe ...\n  // ... function then use this effect instead of the one above and modify ...\n  // ... to work with your chosen auth service.\n\n  /*\n    useEffect(() => {\n      yourAuthService.getUser().then(user => {\n        setUser(user);\n      });\n    }, []);\n    */\n\n  return {\n    user,\n    signin,\n    signup,\n    signout,\n    sendPasswordResetEmail,\n    confirmPasswordReset\n  };\n}\n\nconst getFromQueryString = key => {\n  return queryString.parse(window.location.search)[key];\n};","map":{"version":3,"sources":["/Users/nicoladimarco/Desktop/Code/conversational-test/src/util/auth.js"],"names":["React","useState","useEffect","useContext","createContext","queryString","fakeAuth","authContext","ProvideAuth","children","auth","useProvideAuth","useAuth","user","setUser","signin","email","password","then","signup","signout","sendPasswordResetEmail","confirmPasswordReset","code","resetCode","getFromQueryString","unsubscribe","onChange","key","parse","window","location","search"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,EAAiDC,aAAjD,QAAsE,OAAtE;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,QAAP,MAAqB,WAArB;AAEA;;;;;;;;;;AAUA,MAAMC,WAAW,GAAGH,aAAa,EAAjC,C,CAEA;AACA;;AACA,OAAO,SAASI,WAAT,CAAqB;AAAEC,EAAAA;AAAF,CAArB,EAAmC;AACxC,QAAMC,IAAI,GAAGC,cAAc,EAA3B;AACA,SAAO,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAED,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCD,QAApC,CAAP;AACD,C,CAED;AACA;;AACA,OAAO,MAAMG,OAAO,GAAG,MAAM;AAC3B,SAAOT,UAAU,CAACI,WAAD,CAAjB;AACD,CAFM,C,CAIP;;AACA,SAASI,cAAT,GAA0B;AAAA,oBACAV,QAAQ,CAAC,IAAD,CADR;AAAA;AAAA,QACjBY,IADiB;AAAA,QACXC,OADW;;AAGxB,QAAMC,MAAM,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAClC,WAAOX,QAAQ,CAACS,MAAT,CAAgBC,KAAhB,EAAuBC,QAAvB,EAAiCC,IAAjC,CAAsCL,IAAI,IAAI;AACnDC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACA,aAAOA,IAAP;AACD,KAHM,CAAP;AAID,GALD;;AAOA,QAAMM,MAAM,GAAG,CAACH,KAAD,EAAQC,QAAR,KAAqB;AAClC,WAAOX,QAAQ,CAACa,MAAT,CAAgBH,KAAhB,EAAuBC,QAAvB,EAAiCC,IAAjC,CAAsCL,IAAI,IAAI;AACnDC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACA,aAAOA,IAAP;AACD,KAHM,CAAP;AAID,GALD;;AAOA,QAAMO,OAAO,GAAG,MAAM;AACpB,WAAOd,QAAQ,CAACc,OAAT,GAAmBF,IAAnB,CAAwB,MAAM;AACnCJ,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA,QAAMO,sBAAsB,GAAGL,KAAK,IAAI;AACtC,WAAOV,QAAQ,CAACe,sBAAT,CAAgCL,KAAhC,CAAP;AACD,GAFD;;AAIA,QAAMM,oBAAoB,GAAG,CAACL,QAAD,EAAWM,IAAX,KAAoB;AAC/C;AACA;AACA;AACA;AACA,UAAMC,SAAS,GAAGD,IAAI,IAAIE,kBAAkB,CAAC,MAAD,CAA5C;AACA,WAAOnB,QAAQ,CAACgB,oBAAT,CAA8BL,QAA9B,EAAwCO,SAAxC,CAAP;AACD,GAPD,CA3BwB,CAoCxB;AACA;AACA;AACA;;;AACAtB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMwB,WAAW,GAAGpB,QAAQ,CAACqB,QAAT,CAAkBd,IAAI,IAAI;AAC5CC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACD,KAFmB,CAApB,CADc,CAKd;;AACA,WAAO,MAAMa,WAAW,EAAxB;AACD,GAPQ,EAON,EAPM,CAAT,CAxCwB,CAiDxB;AACA;AACA;AACA;;AACA;;;;;;;;AAQA,SAAO;AACLb,IAAAA,IADK;AAELE,IAAAA,MAFK;AAGLI,IAAAA,MAHK;AAILC,IAAAA,OAJK;AAKLC,IAAAA,sBALK;AAMLC,IAAAA;AANK,GAAP;AAQD;;AAED,MAAMG,kBAAkB,GAAGG,GAAG,IAAI;AAChC,SAAOvB,WAAW,CAACwB,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,EAA0CJ,GAA1C,CAAP;AACD,CAFD","sourcesContent":["import React, { useState, useEffect, useContext, createContext } from \"react\";\nimport queryString from \"query-string\";\nimport fakeAuth from \"fake-auth\";\n\n/*\n    Handles authentication with fakeAuth, a library for prototyping ...\n    ... auth flows without need for a backend (everything is stored locally).\n\n    [CHANGING AUTH SERVICES]: You can switch to another auth service ...\n    ... like firebase, auth0, etc, by modifying the useProvideAuth() ...\n    ... function below. Simply swap out the fakeAuth.function() calls for the ...\n    ... correct ones for your given auth service.\n  */\n\nconst authContext = createContext();\n\n// Provider component that wraps your app and makes auth object ...\n// ... available to any child component that calls useAuth().\nexport function ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n\n// Hook for child components to get the auth object ...\n// ... update when it changes.\nexport const useAuth = () => {\n  return useContext(authContext);\n};\n\n// Provider hook that creates auth object and handles state\nfunction useProvideAuth() {\n  const [user, setUser] = useState(null);\n\n  const signin = (email, password) => {\n    return fakeAuth.signin(email, password).then(user => {\n      setUser(user);\n      return user;\n    });\n  };\n\n  const signup = (email, password) => {\n    return fakeAuth.signup(email, password).then(user => {\n      setUser(user);\n      return user;\n    });\n  };\n\n  const signout = () => {\n    return fakeAuth.signout().then(() => {\n      setUser(false);\n    });\n  };\n\n  const sendPasswordResetEmail = email => {\n    return fakeAuth.sendPasswordResetEmail(email);\n  };\n\n  const confirmPasswordReset = (password, code) => {\n    // If no reset code passed in then fetch it automatically from current url.\n    // [CHANGING AUTH SERVICES]: If not passing in the code as the second ...\n    // ... arg above then make sure getFromQueryString() below has the ...\n    // ... correct url parameter name (it might not be \"code\").\n    const resetCode = code || getFromQueryString(\"code\");\n    return fakeAuth.confirmPasswordReset(password, resetCode);\n  };\n\n  // Subscribe to user on mount\n  // [CHANGING AUTH SERVICES]: Not all auth services have a subscription ...\n  // ... function so depending on your service you may need to remove  ...\n  // ... this effect and use the commented out one below.\n  useEffect(() => {\n    const unsubscribe = fakeAuth.onChange(user => {\n      setUser(user);\n    });\n\n    // Call unsubscribe on cleanup\n    return () => unsubscribe();\n  }, []);\n\n  // Fetch user on mount\n  // [CHANGING AUTH SERVICES]: If your auth service doesn't have a subscribe ...\n  // ... function then use this effect instead of the one above and modify ...\n  // ... to work with your chosen auth service.\n  /*\n    useEffect(() => {\n      yourAuthService.getUser().then(user => {\n        setUser(user);\n      });\n    }, []);\n    */\n\n  return {\n    user,\n    signin,\n    signup,\n    signout,\n    sendPasswordResetEmail,\n    confirmPasswordReset\n  };\n}\n\nconst getFromQueryString = key => {\n  return queryString.parse(window.location.search)[key];\n};\n"]},"metadata":{},"sourceType":"module"}