module.exports=function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);const o=()=>String(Math.floor(1e4*Math.random()));n.default={onChangeCallback:null,signin:function(e,n){return u(e).then(e=>{if(e){if(e.user.password===n)return this.changeAuthToken(e.token),e.user;throw new f("auth/wrong-password","Password is wrong")}throw new f("auth/user-not-found","Email does not have an account")})},signup:function(e,n){return u(e).then(t=>{if(t)throw new f("auth/email-already-in-use","Email is already in use");const r={token:o(),user:{email:e,password:n}};return i(r).then(()=>(this.changeAuthToken(r.token),r.user))})},signout:async function(){return this.changeAuthToken(null),Promise.resolve()},onChange:function(e){this.onChangeCallback=e;const n=e=>{s(e).then(e=>{this.onChangeCallback(!!e&&e.user)})},t=window.addEventListener("storage",({key:e,newValue:t})=>{"auth-token"===e&&n(JSON.parse(t))},!1),o=c("auth-token");return n(o),()=>{window.removeEventListener("storage",t)}},sendPasswordResetEmail:function(e){return u(e).then(e=>{throw e?(d("auth-pass-reset-code",e.token),console.log("Your one-time use password reset code:",e.token),new f("auth/cannot-send-email","You're using Fake Auth, which cannot send password reset emails. These emails normally contain a link to your site with a special reset code. But worry not! Fake Auth has stored the reset code locally in your browser so you can simply go to your change password page now and choose a new password. This enables you to fully test your password reset flow and error states without involving emails.")):new f("auth/user-not-found","Email does not have an account")})},confirmPasswordReset:function(e,n){let t;var o;return n?t=n:(t=c("auth-pass-reset-code"),o="auth-pass-reset-code",window.localStorage.removeItem(o)),l(t,{password:e}).then(e=>{if(e)return!0;throw new f("auth/invalid-action-code","Invalid password update code")})},changeAuthToken:function(e){d("auth-token",e),this.onChangeCallback&&s(e).then(e=>{this.onChangeCallback(!!e&&e.user)})}};const r=()=>c("auth-db",[]),a=e=>d("auth-db",e),s=e=>h(()=>r().find(n=>n.token===e)),u=e=>h(()=>r().find(n=>n.user.email===e)),i=e=>h(()=>{const n=r();n.push(e),a(n)}),l=(e,n={})=>h(()=>{const t=r(),o=t.findIndex(n=>n.token===e);return-1!==o&&(t[o].user={...t[o].user,...n},a(t),!0)});function c(e,n=null){const t=window.localStorage.getItem(e);return t?JSON.parse(t):n}function d(e,n){window.localStorage.setItem(e,JSON.stringify(n))}0===r().length&&a([{user:{email:"demo@gmail.com",pass:"demo"},token:"12345"}]);const h=e=>new Promise(n=>setTimeout(()=>{n(e())},200));function f(e,n){const t=new Error(n);return t.code=e,t}f.prototype=Object.create(Error.prototype)}]);